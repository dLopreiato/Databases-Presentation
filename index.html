<!doctype html>
<html lang="en">

  <head>
    <meta charset="utf-8">

    <title>Databases</title>

    <meta name="description" content="A presentation for the Penn State ACM club.">
    <meta name="author" content="Andrew Lopreiato">

    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

    <meta name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

    <link rel="stylesheet" href="css/reveal.css">
    <link rel="stylesheet" href="css/theme/sky.css" id="theme">
    <link rel="stylesheet" href="css/theme/database-presentation-custom.css">

    <!-- Code syntax highlighting -->
    <link rel="stylesheet" href="lib/css/monokai_sublime.css">

    <!-- Printing and PDF exports -->
    <script>
      var link = document.createElement( 'link' );
      link.rel = 'stylesheet';
      link.type = 'text/css';
      link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
      document.getElementsByTagName( 'head' )[0].appendChild( link );
    </script>

    <!--[if lt IE 9]>
    <script src="lib/js/html5shiv.js"></script>
    <![endif]-->
  </head>

  <body>

    <div class="reveal">
      <div class="slides">

        <!-- Title Slide -->
        <section>
          <h1>
            Databases
          </h1>

          <div data-fragment-index="0" class="fragment">
            <h4>
              <small>
                <span style="color: #5e35b1">
                  The Story of How Debbie Used the Power of Friendship to Take Home Gold at Her Local Hackathon
                </span>
              </small>
            </h4>

            <p>
              <small>
                By Drew Lopreiato
              </small>
            </p>

          </div>
        </section>


        <!-- Prologue -->
        <section>
          <h2>
            Prologue
          </h2>

          <p>
            <div class="titled-portrait prologue-portraits fragment" data-fragment-index="1">
              <img data-src="media/Walt-Portrait.svg" alt="Walt">
              <small>Walt</small>
            </div>
            <div class="titled-portrait prologue-portraits fragment" data-fragment-index="0">
              <img data-src="media/Debbie-Portrait.svg" alt="Debbie">
              <small>Debbie Day Taybass</small>
            </div>
            <div class="titled-portrait prologue-portraits fragment" data-fragment-index="1">
              <img data-src="media/Yalenchka-Portrait.svg" alt="Yalenchka">
              <small>Yalenchka</small>
            </div>
          </p>
          <p>
            <div class="titled-portrait prologue-portraits fragment" data-fragment-index="1">
              <img data-src="media/Fiona-Portrait.svg" alt="Fiona">
              <small>Fiona</small>
            </div>
            <div class="titled-portrait prologue-portraits fragment" data-fragment-index="1">
              <img data-src="media/Yusa-Portrait.svg" alt="Yusa">
              <small>Yusa</small>
            </div>
            <div class="titled-portrait prologue-portraits fragment" data-fragment-index="1">
              <img data-src="media/Seth-Portrait.svg" alt="Seth">
              <small>Seth</small>
            </div>
            <div class="titled-portrait prologue-portraits fragment" data-fragment-index="1">
              <img data-src="media/Vance-Portrait.svg" alt="Vance">
              <small>Adjunct Professor Vance</small>
            </div>
          </p>

          <aside class="notes">
            Ladies and gentlemen... Tonight I will tell you a story of.. [build hype]. This is the story of a girl who
            wanted to make a trivia app for a hackathon. This is the story of...
            <br />
            Debbie Day Taybass, with the help of her friends...
          </aside>
        </section>


        <!-- Meta-Presentation Slide -->
        <section>
          <section>
            <h2>
              Quick Outline
            </h2>

            <p>
              <ul>
                <li data-fragment-index="0" class="fragment">When to use a database</li>
                <li data-fragment-index="0" class="fragment">What a database is</li>
                <li data-fragment-index="0" class="fragment">How to use a database</li>
                <li data-fragment-index="1" class="fragment">Common Database Patterns</li>
                <li data-fragment-index="1" class="fragment">Security Practices</li>
                <li data-fragment-index="1" class="fragment">Advanced SQL Queries</li>
              </ul>
            </p>
          </section>

          <section>
            <h2>
              Please Ask Questions!
            </h2>

            <p data-fragment-index="0" class="fragment">
              "Why did you choose to talk about databases?"
            </p>
            <p data-fragment-index="1" class="fragment">
              "Yo this shit looks fly as fuck."
            </p>
            <p data-fragment-index="2" class="fragment">
              "God, when is this over?"
            </p>
            <aside class="notes">
              Debbie doesn't know where to begin. She see's her friend
            </aside>
          </section>
        </section>


        <!-- "Why do I need a database?" -->
        <section>
          <div class="centered-image">
            <div class="titled-portrait" style="width: 400px; margin: auto;">
              <img data-src="media/Yalenchka-Portrait.svg" alt="Y">
              <small>Yalenchka 'Y' Burdukovskychev</small>
            </div>
          </div>
          
          <h2 data-fragment-index="0" class="fragment">"Y, Why do I need a database?"</h2>

          <aside class="notes">
            Y suggests she looks up databases.
            Debbie asks why.
          </aside>
        </section>


        <!-- Reasons to use a database -->
        <section>
          <h2>
            Why You Might Need a Database
          </h2>

          <p data-fragment-index="0" class="fragment">
            A good interface for structured data
          </p>

          <p data-fragment-index="1" class="fragment">
            Finds data you want quickly
          </p>

          <p data-fragment-index="2" class="fragment">
            Built to work over networks
          </p>
          <aside class="notes">
            <ul>
              <li>"Why do I need a database?"</li>
              <li>Well you have a lot of data that would fit well into something like a spreadsheet.</li>
              <li>"Why not just have a file that I write into memory and search myself?"</li>
              <li>Good for huge amounts of data. And databases are built and optimized by professionals for searching</li>
              <li>"So this is a great way to store questions! But what if I want to store user data?"</li>
              <li>A centralized login thing needs to be on the network, but don't worry! It's built for that.</li>
            </ul>
          </aside>
        </section>


        <!-- "What is a Database?" -->
        <section>
          <div class="centered-image">
            <div class="titled-portrait" style="width: 400px; margin: auto;">
              <img data-src="media/Walt-Portrait.svg" alt="Y">
              <small>Walt Isa</small>
            </div>
          </div>
          
          <h2 data-fragment-index="0" class="fragment">"Walt Isa database?"</h2>

          <aside class="notes">
            Debbie knows she needs one, but doesn't know what it is
          </aside>
        </section>

        <!-- What a database is -->
        <section>
          <h2>
            What a Database Is
          </h2>

          <p>
            In essence, a database is a file with different interface.
          </p>
        </section>
        
        <!-- Attributes Comparison -->
        <section>
          <div class="two-column">
            <p>
              <h3>File</h3>
              <ul data-fragment-index="0" class="fragment">
                <li>Read, Write, Seek</li>
                <li>Character/Line Granularity</li>
                <li>No Pre-defined Structure</li>
              </ul>
            </p>
          </div>
          <div class="two-column">
            <p>
              <h3>Database</h3>
              <ul data-fragment-index="1" class="fragment">
                <li>Create, Read, Update, Delete</li>
                <li>Datatype Granularity</li>
                <li>Row Column Structure</li>
              </ul>
            </p>
          </div>
        </section>

        <!-- Object Definition/Broomball  -->
        <section>
          <section>
            <h2>Consider This Object</h2>

            <pre><code data-trim>
class AcmMember {
    string Name;
    Date GraduationDate;
    int MeetingsAttended;
    BihemisphericDecaoctant BroomballPosition;
}
            </code></pre>
          </section>

          <section>
            <h1>Broomball</h1>
          </section>

          <section>
            <h1>OCTOBER 9TH</h1>
          </section>

          <section>
            <h2>BihemisphereicDecaoctant Definition</h2>
            <pre><code data-trim>
enum BihemisphereicDecaoctant {OffenseRight, OffenseLeft, OffensePost,
        AlphaOuterRight, AlphaInnerRight, AlphaInnerLeft, AlphaOuterLeft,
        AlphaNuetralLeft, AlphaNuetralRight, BetaNuetralRight,
        BetaNuetralLeft, BetaOuterLeft, BetaInnerLeft, BetaInnerRight,
        BetaOuterRight, DefenseGoal, DefenseLeft, DefenseRight};
            </code></pre>

            <p>Game plan available after today's talk</p>
          </section>
        </section>

        <!-- Conceptual Comparison -->
        <section>
          <section>
            <h2>Serialization</h2>
            <div class="two-column">
              <p>
                <h3>File</h3>
                <pre><code data-trim>
{
  "Name" : "Nick",
  "GraduationDate" : "5/6/16",
  "MeetingsAttended" : 30,
  "BihemisphericDecaoctant"
    : "AlphaOuterRight"
}
                </code></pre>
              </p>
            </div>
            <div class="two-column">
              <p>
                <h3>Database</h3>
                <pre>
+-----+--------+----+----------------+
|Name |GradDate|M.A.| BhmsphrcDcctnt |
+-----+--------+----+----------------+
|Nick | 5/6/16 | 30 | AlphaOuterRight|
+-----+--------+----+----------------+
                </pre>
              </p>
            </div>
          </section>

          <section>
            <h2>Serialization</h2>
            <div class="two-column">
              <p>
                <h3>File</h3>
                <pre><code data-trim>
{
  "Name" : "Nick",
  "GraduationDate" : "5/6/16",
  "MeetingsAttended" : 30,
  "BihemisphericDecaoctant"
    : "AlphaOuterRight"
},
{
  "Name" : "Alice",
  "GraduationDate" : "5/6/16",
  "MeetingsAttended" : 2,
  "BihemisphericDecaoctant"
    : "DefenseGoal"
}
                </code></pre>
              </p>
            </div>
            <div class="two-column">
              <p>
                <h3>Database</h3>
                <pre>
+-----+--------+----+----------------+
|Name |GradDate|M.A.| BhmsphrcDcctnt |
+-----+--------+----+----------------+
|Nick | 5/6/16 | 30 | AlphaOuterRight|
+-----+--------+----+----------------+
|Alice| 5/6/18 | 15 |   DefenseGoal  |
+-----+--------+----+----------------+
                </pre>
              </p>
            </div>
            <aside class="notes">
              When you want to delete a row, you have to do some crazy shit with the file, or you can let the DB do that
              for you. It's all the same data, it's just how you look at it.
            </aside>
          </section>
        </section>

        <!-- "How do I Use a Database?" -->
        <section>
          <div class="centered-image">
            <div class="titled-portrait" style="width: 400px; margin: auto;">
              <img data-src="media/Yusa-Portrait.svg" alt="Y">
              <small>Yusa "Data" Bass</small>
            </div>
          </div>
          
          <h2 data-fragment-index="0" class="fragment">"How do I Yusa 'Data' Bass?"</h2>

          <aside class="notes">
            Debbie knows she wants to get one, but doesn't know how to use it.
          </aside>
        </section>

        <!-- How to Use A Database -->
        <section>
          <section>
            <h2>
              How to Set Up Your Database
            </h2>

            <div class="two-column">
              <img data-src="media/WebserverSetup.svg" alt="Webserver Setup"/>
            </div>
            <div class="two-column">
              <img data-src="media/RemoteSetup.svg" alt="Client/Server Setup"/>
            </div>

            <aside class="notes">
              The database is going to be a service that runs on some type of server. In your language there exists at
              least one library that lets you communicate with a SQL database.
            </aside>
          </section>

          <section>
            <h2>
              Connecting to Your Database
            </h2>

            <pre><code data-trim>
$databaseObject = new mysqli('lopreiato.us', 'drew',
    'pa$$w0rd', 'acm_presentation');

Connection conn = DriverManager.getConnection(
    "jdbc:mysql://lopreiato.us/acm_presentation", "drew", "pa$$w0rd");

MySQL.Data.MySqlClient.MySqlConnection conn;
conn = new MySql.Data.MySqlClient.MySqlConnection(
    "server=lopreiato.us;uid=drew;pwd=pa$$w0rd;database=acm_presentation;";

MYSQL *con = mysql_init(NULL);
mysql_real_connect(con, "lopreiato.us", "drew", "pa$$w0rd",
    NULL, 0, NULL, 0);
            </code></pre>
          </section>
        </section>

        <!-- Basic Operations -->
        <section>
          <section>
            <h2>
              Basic Operations
            </h2>

            <table>
              <tr>
                <td>Create</td>
                <td data-fragment-index="0" class="fragment">INSERT</td>
              </tr>
              <tr>
                <td>Read</td>
                <td data-fragment-index="0" class="fragment">SELECT</td>
              </tr>
              <tr>
                <td>Update</td>
                <td data-fragment-index="0" class="fragment">UPDATE</td>
              </tr>
              <tr>
                <td>Delete</td>
                <td data-fragment-index="0" class="fragment">DELETE</td>
              </tr>
            </table>
          </section>

          <section>
            <h2>
              Consider Table "acm_members"
            </h2>
            <table>
              <tr>
                <th>name</th>
                <th>graduation</th>
                <th>meetingsAttended</th>
                <th>bhmsphrcDcctnt</th>
              </tr>
              <tr>
                <td>Nick</td>
                <td>2016-05-06</td>
                <td>30</td>
                <td>AlphaOuterRight</td>
              </tr>
              <tr>
                <td>Alice</td>
                <td>2018-05-06</td>
                <td>15</td>
                <td>DefenseGoal</td>
              </tr>
            </table>
          </section>

          <section>
            <pre><code data-trim>
INSERT INTO acm_members (name, graduation, meetingsAttended, bhmsphrcDcctnt)
VALUES ('John', '2017-05-06', 0, 'BetaNuetralRight');
            </code></pre>
            <table data-fragment-index="0" class="fragment">
              <tr>
                <th>name</th>
                <th>graduation</th>
                <th>meetingsAttended</th>
                <th>bhmsphrcDcctnt</th>
              </tr>
              <tr>
                <td>Nick</td>
                <td>2016-05-06</td>
                <td>30</td>
                <td>AlphaOuterRight</td>
              </tr>
              <tr>
                <td>Alice</td>
                <td>2018-05-06</td>
                <td>15</td>
                <td>DefenseGoal</td>
              </tr>
              <tr>
                <td>John</td>
                <td>2017-05-06</td>
                <td>0</td>
                <td>BetaNuetralRight</td>
              </tr>
            </table>
          </section>

          <section>
            <pre><code data-trim>
DELETE FROM acm_members
WHERE name='John';
            </code></pre>
            <table data-fragment-index="0" class="fragment">
              <tr>
                <th>name</th>
                <th>graduation</th>
                <th>meetingsAttended</th>
                <th>bhmsphrcDcctnt</th>
              </tr>
              <tr>
                <td>Nick</td>
                <td>2016-05-06</td>
                <td>30</td>
                <td>AlphaOuterRight</td>
              </tr>
              <tr>
                <td>Alice</td>
                <td>2018-05-06</td>
                <td>15</td>
                <td>DefenseGoal</td>
              </tr>
            </table>
          </section>

          <section>
            <pre><code data-trim>
UPDATE acm_members
SET meetingsAttended=meetingsAttended-1
WHERE name='Nick';
            </code></pre>
            <table data-fragment-index="0" class="fragment">
              <tr>
                <th>name</th>
                <th>graduation</th>
                <th>meetingsAttended</th>
                <th>bhmsphrcDcctnt</th>
              </tr>
              <tr>
                <td>Nick</td>
                <td>2016-05-06</td>
                <td>29</td>
                <td>AlphaOuterRight</td>
              </tr>
              <tr>
                <td>Alice</td>
                <td>2018-05-06</td>
                <td>15</td>
                <td>DefenseGoal</td>
              </tr>
            </table>
          </section>

          <section>
            <pre><code data-trim>
SELECT name, graduation
FROM acm_members
WHERE meetingsAttended > 0;
            </code></pre>
            <p data-fragment-index="0" class="fragment">RETURN VALUE</p>
            <table data-fragment-index="0" class="fragment">
              <tr>
                <th>name</th>
                <th>graduation</th>
              </tr>
              <tr>
                <td>Nick</td>
                <td>2016-05-06</td>
              </tr>
              <tr>
                <td>Alice</td>
                <td>2018-05-06</td>
              </tr>
            </table>
          </section>
        </section>

        <section>
          <section>
            <h2>
              Designing Our Trivia Game
            </h2>

            <ul data-fragment-index="0" class="fragment">
              <li>Sign In</li>
              <li>Answer Questions</li>
              <li>See a Leader Board</li>
            </ul>
            <aside class="notes">
              I would go over common database solutions, but it's helpful to know where these came from. So let's design our game real fast.
              <br />
              Users will register by putting in their name
              <br />
              Let users answer questions until they get their first one wrong, and then compare scores on a leader board.
              <!-- For populating this table, username comes from first_name, password comes from fruit, score comes from
              the day in their favorite date, if they are finished comes from likes_fotball -->
            </aside>
          </section>

          <section>
            <h2>
              Designed In Java
            </h2>
            <pre><code data-trim>
class User {
  string Name;
  int Score;
}</code><code data-trim>
class Question {
  string Question;
  string Answer;
}</code><code data-trim>
class Game {
  ArrayList&lt;User&gt; Users;
  ArrayList&lt;Question&gt; Questions;
}
            </code></pre>
          </section>

          <section>
            <h2>
              Designed In SQL
            </h2>
            <table class="two-column">
              <tr>
                <th>Name</th>
                <th>Score</th>
              </tr>
              <tr data-fragment-index="0" class="fragment">
                <td>varchar(32)</td>
                <td>int(10)</td>
              </tr>
            </table>
            <table>
              <tr>
                <th>Question</th>
                <th>Answer</th>
              </tr>
              <tr data-fragment-index="0" class="fragment">
                <td>varchar(128)</td>
                <td>varchar(32)</td>
              </tr>
            </table>
            <aside class="notes">
              Show user table. Attempt to update scores of people named will. trivia_users_0
            </aside>
          </section>
        </section>

        <section>
          <div data-fragment-index="0" class="centered-image fragment">
            <div class="titled-portrait" style="width: 400px; margin: auto;">
              <img data-src="media/Fiona-Portrait.svg" alt="Fiona">
              <small>Fiona Keys</small>
            </div>
          </div>
          <aside class="notes">
            See's a girl she recognizes to be good at databases. Calls Fiona over.
          </aside>
        </section>

        <section>
          <h2>
            Primary Keys
          </h2>
          <p data-fragment-index="0" class="fragment">
            Has to be Unique
          </p>
          <p data-fragment-index="1" class="fragment">
            Data is Clustered Based on this Value
          </p>
          <aside class="notes">
            Essentially assigned it an index, because fast retreival, and unique key. Revisit trying to update scores of will. trivia_1
            <br />
            Don't forget to show auto_increment
          </aside>
        </section>

        <section>
          <h2>
            User Feedback!
          </h2>
          <p>
            <small data-fragment-index="0" class="fragment">
              "Wow! This app is fun, but how am I am supposed to know about all this random stuff? I only got 3."
            </small>
            <small data-fragment-index="1" class="fragment">
              "Jeez, I wish I could at least have a chance at some of these questions."
            </small>
            <small data-fragment-index="2" class="fragment">
              "GG2EZ SCRUBLORDS. GET REKT M8! LOLOLOLOL"
            </small>
          </p>
          <aside class="notes">
            Fiona (Uncomfortable)
            <br />
            I want to add categories to make this easier. Do I just add a new text column?
          </aside>
        </section>

        <section>
          <div class="centered-image">
            <div class="titled-portrait" style="width: 400px; margin: auto;">
              <img data-src="media/Fiona-Portrait.svg" alt="Y">
              <small>F. Orin Keys</small>
            </div>
          </div>
        </section>

        <section>
          <h2>
            Foreign Keys
          </h2>
          <ul data-fragment-index="0" class="fragment">
            <li>Save Space</li>
            <li>Easy Updates</li>
            <li>Keep All Values in One Spot</li>
          </ul>
          <aside class="notes">
            Remember how we asigned everything a Unique ID? Just reference that someone where else.
            <br />
            We're now on trivia_2
            <br />
            SEGUE: Now she wants to let users complete mutliple categories under the same name.
          </aside>
          <!--
          For getting the requested questions
          SELECT * FROM trivia_questions_2 WHERE category=2
          Good idea: Index the category.

          For showing users scores relevant to you.
          SELECT * FROM trivia_users_2 WHERE category=2 && score >= 0

          For display the list of categories
          SELECT * FROM trivia_categories_2 ORDER BY display_order ASC
          -->
        </section>

        <section>
          <section>
            <h2>
              Storing Arrays
            </h2>
            <p data-fragment-index="0" class="fragment">
              For storing data in the...
            </p>
          </section>
          <section>
            <h1>SECOND DIMENSION</h1>
          </section>

          <section>
            <pre><code data-trim>
class CategoryScore {
  int Category; // the primary key of the category
  int Score; // the score the user earned
}</code><code data-trim>
class Person {
  int ID;
  string name;
  ArrayList&lt;CategoryScore&gt; Scores;
}</code><code data-trim>
class Game {
  ArrayList&lt;Person&gt; Users;
}
            </code></pre>
          </section>

          <section>
            <h2>Mapping Table</h2>
            <aside class="notes">
              trivia_3
              <br />
              Unique on 2 columns
              <br />
              Almost entirely foreign keys
              <br />
              SEGUE: Let's make a log in system.
            </aside>
            <!--
            For getting if the user has submitted a score or not yet for that category:
            SELECT score FROM trivia_scores_3 WHERE user_id=6

            For getting the ids of the other users who did something in that category:
            SELECT user_id FROM trivia_scores_3 WHERE category_id=2
          -->
          </section>
        </section>

        <section>
          <div class="centered-image">
            <div class="titled-portrait" style="width: 400px; margin: auto;">
              <img data-src="media/Seth-Portrait.svg" alt="Y">
              <small>Seth Querity</small>
            </div>
          </div>

          <h2 data-fragment-index="0" class="fragment">
            "Sounds like you need help with Seth Querity!"
        </section>

        <section>
          <section>
            <h2>Log In Systems</h2>
            <p data-fragment-index="0" class="fragment">
              1.) Username should be unique
            </p>
          </section>

          <section>
            <h2>FOR THE LOVE OF ALL THAT IS HOLY</h2>
          </section>

          <section>
            <h2>DO NOT STORE PASSWORDS AS PLAIN TEXT</h2>
          </section>

          <section><h2>EVER</h2></section>

          <section><h2>EVER</h2></section>
          <section><h2>EVER</h2></section>
          <section><h2>EVER</h2></section>
          <section><h2>EVER</h2></section>
          <section><h2>EVER</h2></section>
        </section>

        <section>
          <h2>Password Hashing!</h2>

          <pre><code data-trim>
function Register(string Username, string Password) {
  string HashValue = hash(Password);

  string registerUserQuery = "INSERT INTO users (username, password)" +
    "VALUES ('" + Username + "', '" + HashValue + "');";

  SqlConnection.query(registerUserQuery);
}
          </code></pre>

          <pre data-fragment-index="0" class="fragment"><code data-trim>
INSERT INTO users (username, hashed_password)
VALUES ('Seth', 'aa21e1e64b5ca4f6e7bd20ed945b8b79');
          </code></pre>
          <!-- His password is 'poop' for those curious. -->
          <aside class="notes">
            Asymmetrical Hashing Algorithm
            <br />
            trivia_4
          </aside>
        </section>

        <section>
          <h2>How do I Authenticate?</h2>

          <pre><code data-trim>
function boolean Authenticate(string Username, string Password) {
  string HashValue = hash(Password);

  string authQuery = "SELECT * FROM trivia_users WHERE username='" + username
    + "' AND hashed_password='" + HashValue + "'";

  SqlResult userSelect = SqlConnection.query(authQuery);

  return userSelect.num_rows > 0;
}
          </code></pre>

          <pre data-fragment-index="0" class="fragment"><code data-trim>
SELECT * FROM trivia_users 
WHERE username='Seth' AND hashed_password='aa21e1e64b5ca4f6e7bd20ed945b8b79';
          </code></pre>
        </section>

        <section>
          <div data-fragment-index="0" class="fragment" style="float: left;">
              <img style="vertical-align: middle;" data-src="media/Seth-Portrait.svg" alt="Y">
              "2:23 Breh!"
          </div>
          <br />
          <div data-fragment-index="1" class="fragment" style="float:right;">
            "THE SHOW CASE STARTS IN 7 MINUTES!"
            <img style="vertical-align: middle;" data-src="media/Debbie-Portrait.svg" alt="Debbie">
          </div>
        </section>

        <section>
          <h2>
            The Database is empty.
          </h2>

          <p data-fragment-index="0" class="fragment">How?</p>
          <p data-fragment-index="3" class="fragment">A SQL Injection</p>
          <p data-fragment-index="1" class="fragment">Why?</p>
          <p data-fragment-index="4" class="fragment">Someone wanted to break your project</p>
          <p data-fragment-index="2" class="fragment">Who?</p>
          <p data-fragment-index="5" class="fragment">Arun.</p>
        </section>

        <section>
          <section>
            <h2>A SQL Injection</h2>
            <pre data-fragment-index="0" class="fragment"><code data-trim>
function Register(string Username, string Password) {
  string HashValue = hash(Password);

  string registerUserQuery = "INSERT INTO users (username, password)" +
    "VALUES ('" + Username + "', '" + "HashValue');";

  SqlConnection.query(registerUserQuery);
}
            </code></pre>

            <pre data-fragment-index="0" class="fragment"><code data-trim>
Register("Seth", "PurpleMonkeyDishwasher");</code><code data-trim>
INSERT INTO users (username, hashed_password)
VALUES ('Seth', 'aa21e1e64b5ca4f6e7bd20ed945b8b79');
            </code></pre>
          </section>

          <section>
            <pre><code data-trim>
void Register("Seth', ''); DROP TABLE trivia_questions; --", "LOLHAX");
</code><code data-trim data-fragment-index="0" class="fragment">
INSERT INTO users (username, hashed_password)
VALUES ('Seth', ''); DROP TABLE trivia_questions; --', '6978ab23a8f309433addd76793a55ddf');
            </code></pre>
          </section>
        </section>

        <section>
          <h2>Always Use Protection</h2>

          <p data-fragment-index="0" class="fragment">Determine What's Valid</p>

          <ul data-fragment-index="1" class="fragment">
            <li>Deny All Unacceptable Strings</li>
            <li>Escape All Strings Before Entry to Database</li>
            <li>Escape All Strings Before Display on Webpage</li>
          </ul>
          <br />
          <br />
          <table data-fragment-index="2" class="fragment">
            <tr>
              <td data-fragment-index="2" class="fragment">What is you're name?</td>
              <td data-fragment-index="3" class="fragment">What is you\'re name?</td>
            </tr>
            <tr>
              <td data-fragment-index="2" class="fragment">Who's dog is this?</td>
              <td data-fragment-index="3" class="fragment">Who\'s dog is this?</td>
            </tr>
            <tr>
              <td data-fragment-index="2" class="fragment">All my corgi's are brown.</td>
              <td data-fragment-index="3" class="fragment">All my corgi\'s are brown.</td>
            </tr>
          </table>
        </section>

        <section>
          <h2>A Failed SQL Injection</h2>
            <pre><code data-trim class="java">
void Register(string Username, string Password) {
  // ...
  Username.replace("'", "\'");
  // ...
}
            </code></pre>
            <pre data-trim data-fragment-index="0" class="fragment"><code data-trim>
void Register("Seth', ''); DROP TABLE trivia_questions; --", "LOLHAX");
</code><code data-trim data-fragment-index="1" class="fragment">
INSERT INTO users (username, hashed_password)
VALUES ('Seth\', \'\'); DROP TABLE trivia_questions; --', '6978ab23a8f309433addd76793a55ddf');
            </code></pre>
        </section>

        <section>
          <h2>The Results are In...</h2>
          <h2 data-trim data-fragment-index="0" class="fragment">In First place...</h2>
        </section>

        <section>
          <h2>DEBBIE DAY TAYBASS</h2>
          <div class="centered-image">
            <div class="titled-portrait" style="width: 400px; margin: auto;">
              <img data-src="media/Debbie-Portrait.svg" alt="Y">
            </div>
          </div>
          <p data-fragment-index="0" class="fragment">But our story doesn't end here.</p>
        </section>

        <section>
          <div class="centered-image">
            <div class="titled-portrait" style="width: 400px; margin: auto;">
              <img data-src="media/Vance-Portrait.svg" alt="Y">
              <small>Ad. Vance Seaqual-Kweries</small>
            </div>
          </div>
          <h2 data-fragment-index="0" class="fragment">
            "Can you help me optimize my game with Ad. Vance Seaqual-Kweries?"
          </h2>
        </section>

        <section>
          <h2>The High Score Table</h2>
          <pre><code data-trim class="java">
ArrayList&lt;Triple&lt;String, Category, int&gt;&gt; GetHighScoreTable(int UserScore, int Radius) {
    ArrayList&lt;Triple&lt;String, Category, int&gt;&gt; highScoreTable =
      new ArrayList&lt;Triple&lt;String, Category, int&gt;&gt;();

    int UpperBound = UserScore + Radius;
    int LowerBound = UserScore - Radius;

    String selectScoresQuery = "SELECT * FROM trivia_scores WHERE score&lt;=" + UpperBound
      + " AND score&gt;=" + LowerBound + ";";
    SqlResult nearbyScores = SqlConnection.query(selectScoresQuery);

    String selectCategoriesQuery = "SELECT * FROM trivia_categories;";
    SqlResult categories = SqlConnection.query(selectCategoriesQuery);

    foreach (Score in nearbyScores) {
      String getUserNameQuery = "SELECT first_name FROM triva_users WHERE id=" + Score.user_id + ";";

      SqlResult userName = SqlConnection.query(getUserNameQuery);

      String category = categories[Score.category_id];

      highScoreTable.add(new Triple(userName.first_name, category, Score.score));
    }

    return highScoreTable;
}
          </code></pre>
          <aside class="notes">
            Segue: all of this can be done in 1 query.
          </aside>
          <!-- 
            SELECT 
            tus.name
            tcg.category
            tcs.score
            FROM trivia_scores tsc
            INNER JOIN trivia_users tus
            ON tsc.user_id=tus.id
            INNER JOIN trivia_categories tcg
            ON tsc.category_id=tcg.id
            WHERE tcs.score <= UpperBound
            AND tcs.score >= LowerBound;
        -->
        </section>

        <section>
          <section>
            <h2>Joins</h2>
            <aside class="notes">
              Our current model is a bit complex, so let's head to the survey you took.
            </aside>
          </section>

          <section>
            <h2>Inner Join</h2>
            <div class="centered-image">
              <div class="titled-portrait" style="width: 400px; margin: auto;">
                <img data-src="media/Inner-Join.svg" alt="Inner Join">
              </div>
            </div>
            <p>
              <small>Excludes any non-matched data</small>
            </p>
          </section>

          <section>
            <h2>Left Join</h2>
            <div class="centered-image">
              <div class="titled-portrait" style="width: 400px; margin: auto;">
                <img data-src="media/Left-Join.svg" alt="Left Join">
              </div>
            </div>
            <p>
              <small>Guarantees the existance of every row from the left</small>
              <br />
              <small>Anything unmatched will be given value <em>NULL</em></small>
            </p>
          </section>

          <section>
            <h2>Right Join</h2>
            <div class="centered-image">
              <div class="titled-portrait" style="width: 400px; margin: auto;">
                <img data-src="media/Right-Join.svg" alt="Right Join">
              </div>
            </div>
            <p>
              <small>Guarantees the existance of every row from the right</small>
              <br />
              <small>Anything unmatched will be given value <em>NULL</em></small>
            </p>
          </section>

          <section>
            <h2>Full/Outer Join</h2>
            <div class="centered-image">
              <div class="titled-portrait" style="width: 400px; margin: auto;">
                <img data-src="media/Outer-Join.svg" alt="Outer Join">
              </div>
            </div>
            <p>
              <small>Guarantees the existance of every row</small>
              <br />
              <small>Anything unmatched will be given value <em>NULL</em></small>
            </p>
            <aside class="notes">
              What place is Debbie in?
            </aside>
          </section>
        </section>


        <section>
          <h2>Calculating Ranking</h2>
          <pre><code data-trim class="java">
int GetRank(int UserScore, int Category) {
  String selectUsersQuery = "SELECT user_id FROM trivia_scores WHERE score &lt;= "
    + UserScore + " AND category_id=" + Category + ";";

  SqlResult betterUsers = SqlConnection.query(selectUsersQuery);

  int count = 0;
  foreach (User in BetterUsers) {
    count++;
  }

  return count;
}
          </code></pre>
        </section>

        <section>
          <h2>Aggregations</h2>

          <pre data-fragment-index="0" class="fragment"><code data-trim>
SELECT count(*)
FROM trivia_scores
WHERE category_id=5;
          </code></pre>

          <!--
          SELECT count(*),
          category_id
          FROM trivia_scores
          GROUP BY category_id -->

          <!--
          SELECT state,
          sum(likes_football) as 'Football Fans',
          avg(length(fruit)) as 'Average Fruit Length'
          FROM `survey`
          GROUP BY state -->

          <p data-fragment-index="2" class="fragment">Returns 1 Row</p>
        </section>

        <!-- Finishing Slide -->
        <section>
          <h1>
            Thank you
          </h1>
          <p class="fragment" data-fragment-index="0">
            Visit my Github for the source where I left more comments.
            <br />
            <small><a href="https://github.com/dLopreiato">http://github.com/dLopreiato</a></small>
          </p>
          <p class="fragment" data-fragment-index="1">
            Made with <a href="https://github.com/hakimel/reveal.js">reveal.js</a>
          </p>
          <p class="fragment" data-fragment-index="2">
            Character Design by <a href="https://github.com/CarpeDiEmma">Emma</a>
          </p>
        </section>

        <section>
          <h3>In loving memory of Noah Sequil</h3>
          <div class="centered-image">
              <div class="titled-portrait" style="width: 400px; margin: auto;">
                <img data-src="media/Noah-Portrait.svg" alt="Noah">
              </div>
            </div>
        </section>

      </div>    <!-- end div="slides" -->
    </div>      <!-- end div="reveal" -->

    <script src="lib/js/head.min.js"></script>
    <script src="js/reveal.js"></script>

    <script>
      Reveal.initialize({
        controls: true,
        progress: true,
        history: false,
        center: true,
        transition: 'slide',

        dependencies: [
          { src: 'lib/js/classList.js',
            condition: function() { return !document.body.classList; } },

          { src: 'plugin/highlight/highlight.js',
            async: true,
            condition: function() { return !!document.querySelector( 'pre code' ); },
            callback: function() { hljs.initHighlightingOnLoad(); } },

          { src: 'plugin/zoom-js/zoom.js',
            async: true },

          { src: 'plugin/notes/notes.js',
            async: true}

        ],

        width: 1024,
        height: 768
      });
    </script>

  </body>

</html>
